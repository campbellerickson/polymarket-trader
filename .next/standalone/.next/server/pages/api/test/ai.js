"use strict";(()=>{var e={};e.id=28,e.ids=[28],e.modules={358:e=>{e.exports=require("kalshi-typescript")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1309:e=>{e.exports=import("@supabase/supabase-js")},9926:e=>{e.exports=import("zod")},729:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>l,default:()=>d,routeModule:()=>u});var o=a(1802),n=a(7153),s=a(6249),i=a(3050),c=e([i]);i=(c.then?(await c)():c)[0];let d=(0,s.l)(i,"default"),l=(0,s.l)(i,"config"),u=new o.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/test/ai",pathname:"/api/test/ai",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},3050:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>d});var o=a(7372),n=a(1836),s=a(3435),i=a(3365),c=e([o,n,s]);async function d(e,t){if(e.headers.authorization!==`Bearer ${process.env.CRON_SECRET}`)return t.status(401).json({error:"Unauthorized"});try{let a=Math.max(1,Math.min(10,Number(e.query.limit||10))),r=(await (0,o.w)()).slice(0,a);if(0===r.length)return t.status(200).json({ok:!0,note:"No qualifying Kalshi contracts found (per current criteria).",contracts_analyzed:0,dailyBudget:i.U.DAILY_BUDGET,selections:[],total_allocated:0,strategy_notes:"No trade recommendation for today."});let c=await (0,s.lv)(50),d=await (0,s.dY)(),l=await (0,n.X)({contracts:r,historicalPerformance:c,currentBankroll:d,dailyBudget:i.U.DAILY_BUDGET});return t.status(200).json({ok:!0,note:"AI analysis only â€” no trades executed",contracts_analyzed:r.length,dailyBudget:i.U.DAILY_BUDGET,selections:l.selectedContracts.map(e=>({market_id:e.contract.market_id,question:e.contract.question,end_date:e.contract.end_date,current_odds:e.contract.current_odds,allocation:e.allocation,confidence:e.confidence,reasoning:e.reasoning})),total_allocated:l.totalAllocated,strategy_notes:l.strategyNotes})}catch(e){return console.error("AI test endpoint error:",e),console.error("Error stack:",e.stack),t.status(500).json({error:e.message,details:void 0,hint:e.message.includes("DECODER")?"Check KALSHI_PRIVATE_KEY format in Vercel environment variables":void 0})}}[o,n,s]=c.then?(await c)():c,r()}catch(e){r(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[947,118],()=>a(729));module.exports=r})();